<!--
@license
Copyright (c) 2015 The Polymer Project Authors. All rights reserved.
This code may only be used under the BSD style license found at http://polymer.github.io/LICENSE.txt
The complete set of authors may be found at http://polymer.github.io/AUTHORS.txt
The complete set of contributors may be found at http://polymer.github.io/CONTRIBUTORS.txt
Code distributed by Google as part of the polymer project is also
subject to an additional IP rights grant found at http://polymer.github.io/PATENTS.txt
-->
<link rel="import" href="../polymer/polymer.html">
<link rel="import" href="../iron-selector/iron-selector.html">
<link rel="import" href="../fs-styles/fs-styles.html">
<link rel="import" href="../iron-ajax/iron-ajax.html">
<link rel="import" href="../wc-i18n/wc-i18n.html">
<link rel="import" href="../iron-a11y-keys/iron-a11y-keys.html">
<link rel="import" href="../oak-i18n-behavior/oak-i18n-behavior.html">
<link rel="import" href="../oak-ajax-behavior/oak-ajax-behavior.html">
<link rel="import" href="../fs-metrics/fs-metrics.html">
<!--
An element providing a solution to no problem in particular.

Example:

    <fs-gallery-view-selector></fs-gallery-view-selector>

@group Seed Elements
@element fs-gallery-view-selector
@demo demo/index.html
@hero hero.svg
-->
<dom-module id="fs-gallery-view-selector">
  <template>
    <style include='fs-styles'>

      :host {
        display: inline-block;
        width:200px;
        height:calc(100% - 65px);
        overflow: scroll;
        -webkit-overflow-scrolling: touch;
        --album-border-style: 1px solid #d2d2d2;
        border-right: var(--album-border-style);
      }

      :host:focus, ::content:focus {
        outline: none;
      }

      @media screen and (max-width: 979px) {
        :host {
          position: relative;
          top: 56px;
          height: calc(100% - 70px);
        }
      }

      ul {
        list-style: none;
        margin:0;
        padding:0;
      }

      ul:focus {
        outline: none;
      }

      li > div.add-album {
        display: block;
        margin: -2px -5px;
        padding: 10px;
        background: #f4f4f4;
      }

      li > div.add-album span {
        margin-left: 5px;
      }
      
      input.album-title-input {
        margin-bottom: 5px;
      }

      .add-item-toggle {
        color: #0051C4
      }

      .add-item-toggle:hover span {
        text-decoration: underline;
      }

      .items-view span, .add-item-toggle span {
        max-width: 115px;
        display: inline-block;
        text-overflow: ellipsis;
        overflow: hidden;
      }

      .items-view, .add-item-toggle {
        font-size: 14px;
        font-size: 0.9286rem;
        white-space: nowrap;
      }

      .album-icon {
        background-position: center center;
        background-repeat: no-repeat;
        background-size: contain;
        display: inline-block;
        height:22px;
        margin-right:10px;
        min-width: 18px;
        width: 18px;
      }

      .albums-divider {
        margin:18px 0 3px;
      }

      .close-button {
        float:right;
        margin: 0 0 5px;
        background-color: transparent;
        border: none;
        filter: brightness(3);
      }

      .close-button:hover {
        filter: brightness(1);
      }

      .fs-badge {
        background: #ececec;
        border-radius: 9px;
        box-sizing: border-box;
        color: #333331;
        display: inline-block;
        font-size: 0.9286rem;
        font-size: 14px;
        font-weight: normal;
        line-height: 1;
        margin: 0 4px;
        min-width: 21px;
        padding: 1px 8px;
        text-shadow: none;
      }

      li {
        position: relative;
        border-bottom: var(--album-border-style);
        width: 100%;
        color: #333331;
        text-decoration: none;
        padding: 2px 5px;
        box-sizing: border-box;
        -moz-box-sizing: border-box;
      }

      li:first-child,
      li.first-item {
        border-top: var(--album-border-style);
      }

      li.dragging {
        background: #D4F3FD;
      }

      span {
        font-size: 1rem;
      }

      .fs-badge {
        position: absolute;
        right: 0px;
        top: 8px;
      }

      .iron-selected .fs-badge {
        color: #fff;
        background: #4d4d4a;
      }

      .add-item-toggle:hover,
      .items-view:hover {
        cursor: pointer;
      }

      .iron-selected.items-view {
        background: #ECEBEA;
      }

      li div {
        display: flex;
        flex-direction: row;
        align-items: center;
        padding: 3px;
      }

      .my-memories-icon {
        background-image: url('data:image/svg+xml;base64,PD94bWwgdmVyc2lvbj0iMS4wIiBlbmNvZGluZz0iVVRGLTgiIHN0YW5kYWxvbmU9Im5vIj8+Cjxzdmcgd2lkdGg9IjIycHgiIGhlaWdodD0iMTdweCIgdmlld0JveD0iMCAwIDIyIDE3IiB2ZXJzaW9uPSIxLjEiIHhtbG5zPSJodHRwOi8vd3d3LnczLm9yZy8yMDAwL3N2ZyIgeG1sbnM6eGxpbms9Imh0dHA6Ly93d3cudzMub3JnLzE5OTkveGxpbmsiIHhtbG5zOnNrZXRjaD0iaHR0cDovL3d3dy5ib2hlbWlhbmNvZGluZy5jb20vc2tldGNoL25zIj4KICAgIDwhLS0gR2VuZXJhdG9yOiBTa2V0Y2ggMy40LjIgKDE1ODU1KSAtIGh0dHA6Ly93d3cuYm9oZW1pYW5jb2RpbmcuY29tL3NrZXRjaCAtLT4KICAgIDx0aXRsZT5TaGFwZTwvdGl0bGU+CiAgICA8ZGVzYz5DcmVhdGVkIHdpdGggU2tldGNoLjwvZGVzYz4KICAgIDxkZWZzPjwvZGVmcz4KICAgIDxnIGlkPSJQYWdlLTEiIHN0cm9rZT0ibm9uZSIgc3Ryb2tlLXdpZHRoPSIxIiBmaWxsPSJub25lIiBmaWxsLXJ1bGU9ImV2ZW5vZGQiIHNrZXRjaDp0eXBlPSJNU1BhZ2UiPgogICAgICAgIDxnIGlkPSJnYWxsZXJ5LWdyaWQtbXktbWVtb3JpZXMtZGVza3RvcCIgc2tldGNoOnR5cGU9Ik1TQXJ0Ym9hcmRHcm91cCIgdHJhbnNmb3JtPSJ0cmFuc2xhdGUoLTEwLjAwMDAwMCwgLTE2Ny4wMDAwMDApIiBmaWxsPSIjMzMzMzMxIj4KICAgICAgICAgICAgPHBhdGggZD0iTTExLjg0MjE0MjksMTgzLjk0OTEzMSBDMTEuNjk3NTcxNCwxODMuOTQ5MTMxIDExLjU2NjE0MjksMTgzLjg5MjE3OCAxMS40NjEsMTgzLjc4MjY1NCBDMTEuMzU1ODU3MSwxODMuNjczMTMxIDExLjMsMTgzLjUzNDAzNSAxMS4zLDE4My4zODI4OTMgTDExLjMsMTgyLjg1Mzg5MyBMMTEuMTkwNDc2MiwxODIuODUzODkzIEMxMC42NDcyMzgxLDE4Mi44NTM4OTMgMTAuMjA0NzYxOSwxODIuNDExNDE2IDEwLjIwNDc2MTksMTgxLjg2ODE3OCBDMTAuMjA0NzYxOSwxODEuMzI0OTQgMTAuNjQ3MjM4MSwxODAuODgyNDY0IDExLjE5MDQ3NjIsMTgwLjg4MjQ2NCBMMTEuMywxODAuODgyNDY0IEwxMS4zLDE3OC40NzI5NCBMMTEuMTkwNDc2MiwxNzguNDcyOTQgQzEwLjY0NzIzODEsMTc4LjQ3Mjk0IDEwLjIwNDc2MTksMTc4LjAzMDQ2NCAxMC4yMDQ3NjE5LDE3Ny40ODcyMjYgQzEwLjIwNDc2MTksMTc2Ljk0Mzk4OCAxMC42NDcyMzgxLDE3Ni41MDE1MTIgMTEuMTkwNDc2MiwxNzYuNTAxNTEyIEwxMS4zLDE3Ni41MDE1MTIgTDExLjMsMTc0LjA5MTk4OCBMMTEuMTkwNDc2MiwxNzQuMDkxOTg4IEMxMC42NDcyMzgxLDE3NC4wOTE5ODggMTAuMjA0NzYxOSwxNzMuNjQ5NTEyIDEwLjIwNDc2MTksMTczLjEwNjI3MyBDMTAuMjA0NzYxOSwxNzIuNTYzMDM1IDEwLjY0NzIzODEsMTcyLjEyMDU1OSAxMS4xOTA0NzYyLDE3Mi4xMjA1NTkgTDExLjMsMTcyLjEyMDU1OSBMMTEuMywxNzAuODA2MjczIEMxMS4zLDE3MC41Nzk1NTkgMTEuMzQ2LDE3MC4zNDczNjkgMTEuNDM0NzE0MywxNzAuMTE3MzY5IEMxMS42NTA0NzYyLDE2OS41MTA2MDcgMTIuMTQ4ODA5NSwxNjguOTU5NzAyIDEyLjkxNDM4MSwxNjguNDc3Nzk3IEMxMy42OTQxOTA1LDE2Ny45ODgyMjYgMTQuNTkxMTkwNSwxNjcuNzM5NjA3IDE1LjU4MTI4NTcsMTY3LjczOTYwNyBMMzEuMzY0NzYxOSwxNjcuNzM5NjA3IEMzMS41MDYwNDc2LDE2Ny43Mzk2MDcgMzEuNjMyLDE2Ny43OTU0NjQgMzEuNzM3MTQyOSwxNjcuOTA2MDgzIEMzMS44Mzc5MDQ4LDE2OC4wMTAxMzEgMzEuODkwNDc2MiwxNjguMTQ5MjI2IDMxLjg5MDQ3NjIsMTY4LjMwODAzNSBMMzEuODkwNDc2MiwxODEuMTcxNjA3IEMzMS44OTA0NzYyLDE4MS4zMjgyMjYgMzEuODM3OTA0OCwxODEuNDY3MzIxIDMxLjczMzg1NzEsMTgxLjU4NTYwNyBDMzEuNjMyLDE4MS43MDE3MDIgMzEuNTExNTIzOCwxODEuNzU3NTU5IDMxLjM2NDc2MTksMTgxLjc1NzU1OSBMMjkuOTE5MDQ3NiwxODEuNzU3NTU5IEwyOS45MTkwNDc2LDE3MC41ODM5NCBDMjkuOTE5MDQ3NiwxNzAuMDA0NTU5IDI5LjY2NDk1MjQsMTY5LjcxMTAzNSAyOS4xNjIyMzgxLDE2OS43MTEwMzUgTDE0Ljk3ODkwNDgsMTY5LjcxMTAzNSBDMTQuMzU3OTA0OCwxNjkuNzExMDM1IDEzLjMxNzQyODYsMTY5LjcxMTAzNSAxMy4zMTc0Mjg2LDE3MC45MTY4OTMgTDEzLjMxNzQyODYsMTcxLjAyNjQxNiBMMjguMTAzMTQyOSwxNzEuMDI2NDE2IEMyOC4yNTEsMTcxLjAyNjQxNiAyOC4zNzE0NzYyLDE3MS4wNzc4OTMgMjguNDYxMjg1NywxNzEuMTgxOTQgQzI4LjU1NjU3MTQsMTcxLjI5MTQ2NCAyOC42MDQ3NjE5LDE3MS40MjUwODMgMjguNjA0NzYxOSwxNzEuNTgwNjA3IEwyOC42MDQ3NjE5LDE4My4zODM5ODggQzI4LjYwNDc2MTksMTgzLjU0Mjc5NyAyOC41NTY1NzE0LDE4My42Nzg2MDcgMjguNDYxMjg1NywxODMuNzg4MTMxIEMyOC4zNjgxOTA1LDE4My44OTY1NTkgMjguMjQ3NzE0MywxODMuOTUwMjI2IDI4LjEwMzE0MjksMTgzLjk1MDIyNiBMMTEuODQyMTQyOSwxODMuOTUwMjI2IEwxMS44NDIxNDI5LDE4My45NDkxMzEgWiBNMjIuNjA1MDQ3NiwxNzcuOTE0MzY5IEMyMi40NjU5NTI0LDE3OC4xNTA5NCAyMi4wMzQ0Mjg2LDE3OC43MDUxMzEgMjAuOTY5ODU3MSwxNzguOTM1MTMxIEwyMC44ODMzMzMzLDE3OC45NTM3NSBMMjAuODgzMzMzMywxNzkuMTExNDY0IEwyMC45NDY4NTcxLDE3OS4xNTMwODMgQzIwLjk0Njg1NzEsMTc5LjE1MzA4MyAyMi4yNDY5MDQ4LDE3OS43NjMxMzEgMjIuNDgzNDc2MiwxNzkuODY0OTg4IEMyMi42ODUsMTc5Ljk1MjYwNyAyMi45MzY5MDQ4LDE4MC4yMTc2NTQgMjIuOTcxOTUyNCwxODAuNDQxMDgzIEMyMi45NzQxNDI5LDE4MC40NTIwMzUgMjMuMTYxNDI4NiwxODEuMTU1MTc4IDIzLjE3MzQ3NjIsMTgxLjIxOTc5NyBDMjMuMTcyMzgxLDE4MS4zOTcyMjYgMjIuMjI5MzgxLDE4MS43NTY0NjQgMTkuOTU2NzYxOSwxODEuNzU4NjU0IEwxOS45NTY3NjE5LDE4MS45Nzc3MDIgTDIzLjIzODA5NTIsMTgxLjk3NzcwMiBDMjMuOTAxODA5NSwxODEuOTc3NzAyIDI0LjQ0Mjg1NzEsMTgxLjQzNjY1NCAyNC40NDI4NTcxLDE4MC43NzI5NCBMMjQuNDQyODU3MSwxNzQuMjAxNTEyIEMyNC40NDI4NTcxLDE3My41Mzc3OTcgMjMuOTAxODA5NSwxNzIuOTk2NzUgMjMuMjM4MDk1MiwxNzIuOTk2NzUgTDE2LjY2NjY2NjcsMTcyLjk5Njc1IEMxNi4wMDI5NTI0LDE3Mi45OTY3NSAxNS40NjE5MDQ4LDE3My41Mzc3OTcgMTUuNDYxOTA0OCwxNzQuMjAxNTEyIEwxNS40NjE5MDQ4LDE4MC43NzI5NCBDMTUuNDYxOTA0OCwxODEuNDM2NjU0IDE2LjAwMjk1MjQsMTgxLjk3NzcwMiAxNi42NjY2NjY3LDE4MS45Nzc3MDIgTDE5Ljg5NjUyMzgsMTgxLjk3NzcwMiBMMTkuODk2NTIzOCwxODEuNzU4NjU0IEMxNy42MjUsMTgxLjc1NjQ2NCAxNi42ODIsMTgxLjM5NzIyNiAxNi42ODIsMTgxLjIwNTU1OSBDMTYuNjkxODU3MSwxODEuMTU2MjczIDE2Ljg4MDIzODEsMTgwLjQ1MzEzMSAxNi44ODAyMzgxLDE4MC40NTMxMzEgQzE2LjkxNzQ3NjIsMTgwLjIxNzY1NCAxNy4xNjkzODEsMTc5Ljk1MjYwNyAxNy4zNzA5MDQ4LDE3OS44NjQ5ODggQzE3LjYwNjM4MSwxNzkuNzYzMTMxIDE4LjkwNjQyODYsMTc5LjE1MzA4MyAxOC45MDY0Mjg2LDE3OS4xNTMwODMgTDE4Ljk2OTk1MjQsMTc5LjEyMzUxMiBMMTguOTY5OTUyNCwxNzguOTY1Nzk3IEwxOC44ODM0Mjg2LDE3OC45MzUxMzEgQzE3LjgxODg1NzEsMTc4LjcwNTEzMSAxNy4zODczMzMzLDE3OC4xNTA5NCAxNy4yNDcxNDI5LDE3Ny45MTQzNjkgQzE3LjM5OTM4MSwxNzcuODYzOTg4IDE3LjY0MDMzMzMsMTc3Ljc0ODk4OCAxNy44Mjc2MTksMTc3LjQ5NDg5MyBDMTguMDcxODU3MSwxNzcuMTYxOTQgMTguMTQ2MzMzMywxNzYuNzAwODQ1IDE4LjA0ODg1NzEsMTc2LjEyNDc1IEMxOC4wMzEzMzMzLDE3Ni4wMjM5ODggMTguMDI4MDQ3NiwxNzUuOTI0MzIxIDE4LjAzNjgwOTUsMTc1LjgxMjYwNyBDMTguMDI4MDQ3NiwxNzUuNDU1NTU5IDE4LjE2Mzg1NzEsMTc1LjEyMTUxMiAxOC40MTc5NTI0LDE3NC44NjA4NDUgQzE4Ljc2Mjk1MjQsMTc0LjUwNTk4OCAxOS4yOTg1MjM4LDE3NC4zMTEwMzUgMTkuOTI3MTkwNSwxNzQuMzExMDM1IEMyMC41NTM2NjY3LDE3NC4zMTEwMzUgMjEuMDg5MjM4MSwxNzQuNTA1OTg4IDIxLjQzNDIzODEsMTc0Ljg1OTc1IEMyMS42ODk0Mjg2LDE3NS4xMjA0MTYgMjEuODI1MjM4MSwxNzUuNDU0NDY0IDIxLjgxNjQ3NjIsMTc1LjgwMDU1OSBDMjEuODI1MjM4MSwxNzUuOTI0MzIxIDIxLjgyMTk1MjQsMTc2LjAyMzk4OCAyMS44MDQ0Mjg2LDE3Ni4xMjM2NTQgQzIxLjcwNjk1MjQsMTc2LjcwMDg0NSAyMS43ODE0Mjg2LDE3Ny4xNjE5NCAyMi4wMjU2NjY3LDE3Ny40OTM3OTcgQzIyLjIxMjk1MjQsMTc3Ljc0ODk4OCAyMi40NTM5MDQ4LDE3Ny44NjM5ODggMjIuNjA1MDQ3NiwxNzcuOTE0MzY5IEwyMi42MDUwNDc2LDE3Ny45MTQzNjkgWiIgaWQ9IlNoYXBlIiBza2V0Y2g6dHlwZT0iTVNTaGFwZUdyb3VwIj48L3BhdGg+CiAgICAgICAgPC9nPgogICAgPC9nPgo8L3N2Zz4=');
        width: 22px;
      }

      .my-archive-icon {
        background-image: url('data:image/svg+xml;base64,PD94bWwgdmVyc2lvbj0iMS4wIiBlbmNvZGluZz0iVVRGLTgiIHN0YW5kYWxvbmU9Im5vIj8+Cjxzdmcgd2lkdGg9IjE2cHgiIGhlaWdodD0iMTRweCIgdmlld0JveD0iMCAwIDE2IDE0IiB2ZXJzaW9uPSIxLjEiIHhtbG5zPSJodHRwOi8vd3d3LnczLm9yZy8yMDAwL3N2ZyIgeG1sbnM6eGxpbms9Imh0dHA6Ly93d3cudzMub3JnLzE5OTkveGxpbmsiIHhtbG5zOnNrZXRjaD0iaHR0cDovL3d3dy5ib2hlbWlhbmNvZGluZy5jb20vc2tldGNoL25zIj4KICAgIDwhLS0gR2VuZXJhdG9yOiBTa2V0Y2ggMy40ICgxNTU3NSkgLSBodHRwOi8vd3d3LmJvaGVtaWFuY29kaW5nLmNvbS9za2V0Y2ggLS0+CiAgICA8dGl0bGU+c291cmNlLWJveC1zbWFsbDwvdGl0bGU+CiAgICA8ZGVzYz5DcmVhdGVkIHdpdGggU2tldGNoLjwvZGVzYz4KICAgIDxkZWZzPjwvZGVmcz4KICAgIDxnIGlkPSJQYWdlLTEiIHN0cm9rZT0ibm9uZSIgc3Ryb2tlLXdpZHRoPSIxIiBmaWxsPSJub25lIiBmaWxsLXJ1bGU9ImV2ZW5vZGQiIHNrZXRjaDp0eXBlPSJNU1BhZ2UiPgogICAgICAgIDxnIGlkPSJnYWxsZXJ5LWdyaWQtbXktbWVtb3JpZXMtZGVza3RvcCIgc2tldGNoOnR5cGU9Ik1TQXJ0Ym9hcmRHcm91cCIgdHJhbnNmb3JtPSJ0cmFuc2xhdGUoLTEzLjAwMDAwMCwgLTIwMy4wMDAwMDApIj4KICAgICAgICAgICAgPGcgaWQ9InNvdXJjZS1ib3gtc21hbGwiIHNrZXRjaDp0eXBlPSJNU0xheWVyR3JvdXAiIHRyYW5zZm9ybT0idHJhbnNsYXRlKDEzLjAwMDAwMCwgMjAzLjAwMDAwMCkiPgogICAgICAgICAgICAgICAgPHBhdGggZD0iTTAuMSwzLjkgTDAuMSwyIEwzLjA1NiwwLjA4MyBMMTMsMC4xIEwxNS45NDQsMi4wODMgTDE1LjkwMiwzLjkgTDAuMSwzLjkgWiIgaWQ9IlNoYXBlIiBmaWxsPSIjMzMzMzMxIiBza2V0Y2g6dHlwZT0iTVNTaGFwZUdyb3VwIj48L3BhdGg+CiAgICAgICAgICAgICAgICA8cmVjdCBpZD0iUmVjdGFuZ2xlLXBhdGgiIHNrZXRjaDp0eXBlPSJNU1NoYXBlR3JvdXAiIHg9IjAuMSIgeT0iMC4xIiB3aWR0aD0iMTUuOCIgaGVpZ2h0PSIxMy44Ij48L3JlY3Q+CiAgICAgICAgICAgICAgICA8cGF0aCBkPSJNMywxMy45IEMxLjk1MiwxMy45IDEuMSwxMy4wNDcgMS4xLDEyIEwxLjEsNS4xIEwxNC45LDUuMSBMMTQuOSwxMiBDMTQuOSwxMy4wNDggMTQuMDQ3LDEzLjkgMTMsMTMuOSBMMywxMy45IEwzLDEzLjkgWiBNNS41LDYuOSBDNS4xNjksNi45IDQuOSw3LjE2OSA0LjksNy41IEM0LjksNy44MzEgNS4xNjksOC4xIDUuNSw4LjEgTDEwLjUsOC4xIEMxMC44MzEsOC4xIDExLjEsNy44MzEgMTEuMSw3LjUgQzExLjEsNy4xNjkgMTAuODMxLDYuOSAxMC41LDYuOSBMNS41LDYuOSBMNS41LDYuOSBaIiBpZD0iU2hhcGUiIGZpbGw9IiMzMzMzMzEiIHNrZXRjaDp0eXBlPSJNU1NoYXBlR3JvdXAiPjwvcGF0aD4KICAgICAgICAgICAgPC9nPgogICAgICAgIDwvZz4KICAgIDwvZz4KPC9zdmc+');
      }

      .my-favorites-icon {
        background-image: url(data:image/svg+xml;base64,PHN2ZyB2ZXJzaW9uPSIxLjIiIGJhc2VQcm9maWxlPSJ0aW55IiBpZD0iTGF5ZXJfMSIgeG1sbnM9Imh0dHA6Ly93d3cudzMub3JnLzIwMDAvc3ZnIiB4bWxuczp4bGluaz0iaHR0cDovL3d3dy53My5vcmcvMTk5OS94bGluayIgeD0iMHB4IiB5PSIwcHgiIHdpZHRoPSIxOHB4IiBoZWlnaHQ9IjE2cHgiIHZpZXdCb3g9IjAgMCAxOCAxNiIgeG1sOnNwYWNlPSJwcmVzZXJ2ZSI+PHBhdGggZmlsbD0iIzMzMzMzMSIgZD0iTTksMTUuODYyYy0xLjAxNC0wLjk1Ny0zLjUyNy0zLjM0MS01LjMxMS01LjEwM0MxLjAyMiw4LjEyNywwLjAyNyw2LjA5OCwwLjE0LDMuNTIzQzAuMjEyLDEuODc3LDEuNTAyLDAuMSwzLjQ2LDAuMWwwLjE0MywwLjAwM2MyLjk3MywwLjEzMyw1LjA4MywzLjA5Niw1LjMxMywzLjQzM2wwLjA4MywwLjEybDAuMDgzLTAuMTJjMC4yMzEtMC4zMzcsMi4zNDYtMy4zLDUuMzE1LTMuNDMzTDE0LjUzOCwwLjFjMS45NTksMCwzLjI0OSwxLjc3NywzLjMyMSwzLjQyM2MwLjExMiwyLjU3NS0wLjg4Myw0LjYwNC0zLjU1LDcuMjM3Yy0xLjY4NSwxLjY2NC00LjAzNiwzLjg5OC01LjI4OCw1LjA4Mkw5LDE1Ljg2MnoiLz48cmVjdCB5PSIwIiBmaWxsPSJub25lIiB3aWR0aD0iMTgiIGhlaWdodD0iMTYiLz48L3N2Zz4=);
      }

      .recently-deleted-icon {
        background-image: url(data:image/svg+xml;base64,PHN2ZyB3aWR0aD0iMTUiIGhlaWdodD0iMTUiIHZpZXdCb3g9IjAgMCAxNSAxNSIgeG1sbnM9Imh0dHA6Ly93d3cudzMub3JnLzIwMDAvc3ZnIiB4bWxuczp4bGluaz0iaHR0cDovL3d3dy53My5vcmcvMTk5OS94bGluayI+PHRpdGxlPmRlbGV0ZS1zbWFsbDwvdGl0bGU+PGRlZnM+PHBhdGggaWQ9ImEiIGQ9Ik0wIDBoMTNsLTIgMTNIMnoiLz48cGF0aCBpZD0iYyIgZD0iTTAgMGgxM2wtMiAxM0gyeiIvPjxwYXRoIGlkPSJlIiBkPSJNMCAwaDEzbC0yIDEzSDJ6Ii8+PHBhdGggaWQ9ImciIGQ9Ik0wIDBoMTNsLTIgMTNIMnoiLz48cGF0aCBpZD0iaSIgZD0iTTAgMGgxM2wtMiAxM0gyeiIvPjxwYXRoIGlkPSJrIiBkPSJNMCAwaDEzbC0yIDEzSDJ6Ii8+PHBhdGggaWQ9Im0iIGQ9Ik0wIDBoMTNsLTIgMTNIMnoiLz48cGF0aCBpZD0ibyIgZD0iTTAgMGgxM2wtMiAxM0gyeiIvPjwvZGVmcz48ZyBmaWxsPSJub25lIiBmaWxsLXJ1bGU9ImV2ZW5vZGQiPjxwYXRoIGQ9Ik0uNDE4IDIuNTA3Qy40NjMgMi43NzcuNzI1IDMgMSAzaDEzYy4yNzUgMCAuNTM3LS4yMjIuNTgyLS40OTNsLjMzNi0yLjAxNEMxNC45NjMuMjIzIDE0Ljc3NSAwIDE0LjUgMEguNUMuMjI1IDAgLjAzNy4yMjIuMDgyLjQ5M2wuMzM2IDIuMDE0eiIgZmlsbD0iIzMzMzMzMSIvPjxwYXRoIGQ9Ik0xMi45MTcgM2wtMS43NzUgMTFIMy44NThMMi4xNjYgM0gxM2gtLjA4M3ptLjU4My0xaC0xMmMtLjI3NSAwLS40NjYuMjIyLS40MjQuNDk0bDEuODQ4IDEyLjAxMmMuMDQyLjI3Mi4zLjQ5NC41NzYuNDk0aDhjLjI3NSAwIC41MzQtLjIyMi41NzYtLjQ5NGwxLjg0OC0xMi4wMTJjLjA0Mi0uMjcyLS4xNS0uNDk0LS40MjQtLjQ5NHoiIGZpbGw9IiMzMzMzMzEiLz48ZyB0cmFuc2Zvcm09InRyYW5zbGF0ZSgxIDIpIj48bWFzayBpZD0iYiIgZmlsbD0iI2ZmZiI+PHVzZSB4bGluazpocmVmPSIjYSIvPjwvbWFzaz48cGF0aCBkPSJNOS45MSAxMi45OTdDOC4yNTIgOC42MDcgNC44MyA1LjA4My41MSAzLjI5IiBzdHJva2U9IiMzMzMzMzEiIHN0cm9rZS13aWR0aD0iMS41IiBtYXNrPSJ1cmwoI2IpIi8+PC9nPjxnIHRyYW5zZm9ybT0idHJhbnNsYXRlKDEgMikiPjxtYXNrIGlkPSJkIiBmaWxsPSIjZmZmIj48dXNlIHhsaW5rOmhyZWY9IiNjIi8+PC9tYXNrPjxwYXRoIGQ9Ik03LjAwMyAxM0M1LjYgMTAuMzcyIDMuNTI4IDguMTYgMS4wMTUgNi41ODQiIHN0cm9rZT0iIzMzMzMzMSIgc3Ryb2tlLXdpZHRoPSIxLjUiIG1hc2s9InVybCgjZCkiLz48L2c+PGcgdHJhbnNmb3JtPSJ0cmFuc2xhdGUoMSAyKSI+PG1hc2sgaWQ9ImYiIGZpbGw9IiNmZmYiPjx1c2UgeGxpbms6aHJlZj0iI2UiLz48L21hc2s+PHBhdGggZD0iTTExLjQ3MiA5Ljk0NUM5LjM0IDUuMjc4IDUuMTYgMS43NDMuMDguNDkyIiBzdHJva2U9IiMzMzMzMzEiIHN0cm9rZS13aWR0aD0iMS41IiBtYXNrPSJ1cmwoI2YpIi8+PC9nPjxnIHRyYW5zZm9ybT0idHJhbnNsYXRlKDEgMikiPjxtYXNrIGlkPSJoIiBmaWxsPSIjZmZmIj48dXNlIHhsaW5rOmhyZWY9IiNnIi8+PC9tYXNrPjxwYXRoIGQ9Ik0xMi4xNDMgNS41NjRDMTAuNTkgMy4yNCA4LjQ4IDEuMzI0IDYuMDA1IDAiIHN0cm9rZT0iIzMzMzMzMSIgc3Ryb2tlLXdpZHRoPSIxLjUiIG1hc2s9InVybCgjaCkiLz48L2c+PGcgdHJhbnNmb3JtPSJ0cmFuc2xhdGUoMSAyKSI+PG1hc2sgaWQ9ImoiIGZpbGw9IiNmZmYiPjx1c2UgeGxpbms6aHJlZj0iI2kiLz48L21hc2s+PHBhdGggZD0iTTMuMDkgMTNjMS42NTYtNC4zOTIgNS4wOC03LjkxOCA5LjQwNC05LjcxIiBzdHJva2U9IiMzMzMzMzEiIHN0cm9rZS13aWR0aD0iMS41IiBtYXNrPSJ1cmwoI2opIi8+PC9nPjxnIHRyYW5zZm9ybT0idHJhbnNsYXRlKDEgMikiPjxtYXNrIGlkPSJsIiBmaWxsPSIjZmZmIj48dXNlIHhsaW5rOmhyZWY9IiNrIi8+PC9tYXNrPjxwYXRoIGQ9Ik01Ljk5NiAxM2MxLjQwMy0yLjYyNyAzLjQ3Ni00Ljg0IDUuOTktNi40MTciIHN0cm9rZT0iIzMzMzMzMSIgc3Ryb2tlLXdpZHRoPSIxLjUiIG1hc2s9InVybCgjbCkiLz48L2c+PGcgdHJhbnNmb3JtPSJ0cmFuc2xhdGUoMSAyKSI+PG1hc2sgaWQ9Im4iIGZpbGw9IiNmZmYiPjx1c2UgeGxpbms6aHJlZj0iI20iLz48L21hc2s+PHBhdGggZD0iTTEuNTMgOS45NDRDMy42NiA1LjI3NyA3Ljg0MyAxLjc0MiAxMi45MjMuNDkyIiBzdHJva2U9IiMzMzMzMzEiIHN0cm9rZS13aWR0aD0iMS41IiBtYXNrPSJ1cmwoI24pIi8+PC9nPjxnIHRyYW5zZm9ybT0idHJhbnNsYXRlKDEgMikiPjxtYXNrIGlkPSJwIiBmaWxsPSIjZmZmIj48dXNlIHhsaW5rOmhyZWY9IiNvIi8+PC9tYXNrPjxwYXRoIGQ9Ik0uODU2IDUuNTY2QzIuNDA4IDMuMjQzIDQuNTE2IDEuMzI0IDYuOTkzIDAiIHN0cm9rZT0iIzMzMzMzMSIgc3Ryb2tlLXdpZHRoPSIxLjUiIG1hc2s9InVybCgjcCkiLz48L2c+PHBhdGggZD0iTTAgMGgxNXYxNUgweiIvPjwvZz48L3N2Zz4=);
      }

      .add-folder-icon {
        background-image: url('data:image/svg+xml;base64,PD94bWwgdmVyc2lvbj0iMS4wIiBlbmNvZGluZz0iVVRGLTgiIHN0YW5kYWxvbmU9Im5vIj8+Cjxzdmcgd2lkdGg9IjI5cHgiIGhlaWdodD0iMjFweCIgdmlld0JveD0iMCAwIDI5IDIxIiB2ZXJzaW9uPSIxLjEiIHhtbG5zPSJodHRwOi8vd3d3LnczLm9yZy8yMDAwL3N2ZyIgeG1sbnM6eGxpbms9Imh0dHA6Ly93d3cudzMub3JnLzE5OTkveGxpbmsiIHhtbG5zOnNrZXRjaD0iaHR0cDovL3d3dy5ib2hlbWlhbmNvZGluZy5jb20vc2tldGNoL25zIj4KICAgIDwhLS0gR2VuZXJhdG9yOiBTa2V0Y2ggMy4zLjMgKDEyMDcyKSAtIGh0dHA6Ly93d3cuYm9oZW1pYW5jb2RpbmcuY29tL3NrZXRjaCAtLT4KICAgIDx0aXRsZT5mb2xkZXItb3Blbi1zbWFsbCBjb3B5IDIgKyBMaW5lICsgTGluZSBDb3B5IDEwPC90aXRsZT4KICAgIDxkZXNjPkNyZWF0ZWQgd2l0aCBTa2V0Y2guPC9kZXNjPgogICAgPGRlZnM+PC9kZWZzPgogICAgPGcgaWQ9IlBhZ2UtMSIgc3Ryb2tlPSJub25lIiBzdHJva2Utd2lkdGg9IjEiIGZpbGw9Im5vbmUiIGZpbGwtcnVsZT0iZXZlbm9kZCIgc2tldGNoOnR5cGU9Ik1TUGFnZSI+CiAgICAgICAgPGcgaWQ9ImFsYnVtLXNoYXJlIiBza2V0Y2g6dHlwZT0iTVNBcnRib2FyZEdyb3VwIiB0cmFuc2Zvcm09InRyYW5zbGF0ZSgtMTAuMDAwMDAwLCAtMjQ0LjAwMDAwMCkiPgogICAgICAgICAgICA8ZyBpZD0iZm9sZGVyLW9wZW4tc21hbGwtY29weS0yLSstTGluZS0rLUxpbmUtQ29weS0xMCIgc2tldGNoOnR5cGU9Ik1TTGF5ZXJHcm91cCIgdHJhbnNmb3JtPSJ0cmFuc2xhdGUoMTEuMDAwMDAwLCAyNDUuMDAwMDAwKSI+CiAgICAgICAgICAgICAgICA8ZyBpZD0iZm9sZGVyLW9wZW4tc21hbGwtY29weS0yIiB0cmFuc2Zvcm09InRyYW5zbGF0ZSg3LjAwMDAwMCwgNi4wMDAwMDApIiBmaWxsPSIjMDA0REM3IiBza2V0Y2g6dHlwZT0iTVNTaGFwZUdyb3VwIj4KICAgICAgICAgICAgICAgICAgICA8cGF0aCBkPSJNNy43ODA1LDAuOTMzMzMzMzMzIEw5Ljg0MDgzMzMzLDIuOTkzNjY2NjcgTDEwLjExMzgzMzMsMy4yNjY2NjY2NyBMMTAuNSwzLjI2NjY2NjY3IEwxNi4zMzMzMzMzLDMuMjY2NjY2NjcgQzE2LjQ1OTMzMzMsMy4yNjY2NjY2NyAxNi41NjY2NjY3LDMuMzc0IDE2LjU2NjY2NjcsMy41IEwxNi41NjY2NjY3LDguMTY2NjY2NjcgQzE2LjU2NjY2NjcsOC4yOTI2NjY2NyAxNi40NTkzMzMzLDguNCAxNi4zMzMzMzMzLDguNCBDMTUuMTc2LDguNCAxNC4yMzMzMzMzLDkuMzQxNSAxNC4yMzMzMzMzLDEwLjUgTDE0LjIzMzMzMzMsMTIuODMzMzMzMyBDMTQuMjMzMzMzMywxMi45NTkzMzMzIDE0LjEyNiwxMy4wNjY2NjY3IDE0LDEzLjA2NjY2NjcgTDEuMTY2NjY2NjcsMTMuMDY2NjY2NyBDMS4wNDA2NjY2NywxMy4wNjY2NjY3IDAuOTMzMzMzMzMzLDEyLjk1OTMzMzMgMC45MzMzMzMzMzMsMTIuODMzMzMzMyBMMC45MzMzMzMzMzMsMi43MjA2NjY2NyBMMi43MjA2NjY2NywwLjkzMzMzMzMzMyBMNy43ODA1LDAuOTMzMzMzMzMzIEw3Ljc4MDUsMC45MzMzMzMzMzMgWiBNOC4xNjY2NjY2NywwIEwyLjMzMzMzMzMzLDAgTDAsMi4zMzMzMzMzMyBMMCwxMi44MzMzMzMzIEMwLDEzLjQ3NSAwLjUyNSwxNCAxLjE2NjY2NjY3LDE0IEwxNCwxNCBDMTQuNjQxNjY2NywxNCAxNS4xNjY2NjY3LDEzLjQ3NSAxNS4xNjY2NjY3LDEyLjgzMzMzMzMgTDE1LjE2NjY2NjcsMTAuNSBDMTUuMTY2NjY2Nyw5Ljg1ODMzMzMzIDE1LjY5MTY2NjcsOS4zMzMzMzMzMyAxNi4zMzMzMzMzLDkuMzMzMzMzMzMgQzE2Ljk3NSw5LjMzMzMzMzMzIDE3LjUsOC44MDgzMzMzMyAxNy41LDguMTY2NjY2NjcgTDE3LjUsMy41IEMxNy41LDIuODU4MzMzMzMgMTYuOTc1LDIuMzMzMzMzMzMgMTYuMzMzMzMzMywyLjMzMzMzMzMzIEwxMC41LDIuMzMzMzMzMzMgTDguMTY2NjY2NjcsMCBMOC4xNjY2NjY2NywwIFoiIGlkPSJTaGFwZSI+PC9wYXRoPgogICAgICAgICAgICAgICAgICAgIDxwYXRoIGQ9Ik0yLjMzMzMzMzMzLDEzLjg4MzMzMzMgQzEuNzE1LDEzLjg4MzMzMzMgMS4yODMzMzMzMywxMy42MzcxNjY3IDEuMjgzMzMzMzMsMTMuNDE2NjY2NyBDMS4yODMzMzMzMywxMy4xMTIxNjY3IDEuNDg5ODMzMzMsMTIuMzc0ODMzMyAxLjczMzY2NjY3LDExLjgwNjY2NjcgTDQuMzE0MzMzMzMsNS43ODQzMzMzMyBDNC41NDY1LDUuMjQxODMzMzMgNS4yNDMsNC43ODMzMzMzMyA1LjgzMzMzMzMzLDQuNzgzMzMzMzMgTDE5LjgzMzMzMzMsNC43ODMzMzMzMyBDMjAuMTA0LDQuNzgzMzMzMzMgMjAuMzE5ODMzMyw0Ljg4MDE2NjY3IDIwLjQ0MTE2NjcsNS4wNTQgQzIwLjU2MjUsNS4yMjc4MzMzMyAyMC41NzY1LDUuNDY0NjY2NjcgMjAuNDgwODMzMyw1LjcxNzgzMzMzIEwxNy44MDEsMTIuODY2IEMxNy41OTQ1LDEzLjQxNzgzMzMgMTYuOTIyNSwxMy44ODMzMzMzIDE2LjMzMzMzMzMsMTMuODgzMzMzMyBMMi4zMzMzMzMzMywxMy44ODMzMzMzIEwyLjMzMzMzMzMzLDEzLjg4MzMzMzMgWiIgaWQ9IlNoYXBlIj48L3BhdGg+CiAgICAgICAgICAgICAgICA8L2c+CiAgICAgICAgICAgICAgICA8cGF0aCBkPSJNNCwwLjAzNDEyMzQyMDcgTDQsOC4wMzQxMjM0MiIgaWQ9IkxpbmUiIHN0cm9rZT0iIzAwNERDNyIgc3Ryb2tlLXdpZHRoPSIyIiBzdHJva2UtbGluZWNhcD0ic3F1YXJlIiBza2V0Y2g6dHlwZT0iTVNTaGFwZUdyb3VwIj48L3BhdGg+CiAgICAgICAgICAgICAgICA8cGF0aCBkPSJNOCw0LjAzNDEyMzQyIEwwLDQuMDM0MTIzNDIiIGlkPSJMaW5lLUNvcHktMTAiIHN0cm9rZT0iIzAwNERDNyIgc3Ryb2tlLXdpZHRoPSIyIiBzdHJva2UtbGluZWNhcD0ic3F1YXJlIiBza2V0Y2g6dHlwZT0iTVNTaGFwZUdyb3VwIj48L3BhdGg+CiAgICAgICAgICAgIDwvZz4KICAgICAgICA8L2c+CiAgICA8L2c+Cjwvc3ZnPg==');
      }

      .folder-icon {
        background-image: url('data:image/svg+xml;base64,PD94bWwgdmVyc2lvbj0iMS4wIiBlbmNvZGluZz0iVVRGLTgiIHN0YW5kYWxvbmU9Im5vIj8+Cjxzdmcgd2lkdGg9IjE4cHgiIGhlaWdodD0iMTRweCIgdmlld0JveD0iMCAwIDE4IDE0IiB2ZXJzaW9uPSIxLjEiIHhtbG5zPSJodHRwOi8vd3d3LnczLm9yZy8yMDAwL3N2ZyIgeG1sbnM6eGxpbms9Imh0dHA6Ly93d3cudzMub3JnLzE5OTkveGxpbmsiIHhtbG5zOnNrZXRjaD0iaHR0cDovL3d3dy5ib2hlbWlhbmNvZGluZy5jb20vc2tldGNoL25zIj4KICAgIDwhLS0gR2VuZXJhdG9yOiBTa2V0Y2ggMy4zLjMgKDEyMDcyKSAtIGh0dHA6Ly93d3cuYm9oZW1pYW5jb2RpbmcuY29tL3NrZXRjaCAtLT4KICAgIDx0aXRsZT5mb2xkZXItb3Blbi1zbWFsbCBjb3B5IDMgKyBSZWN0YW5nbGUgOTMyPC90aXRsZT4KICAgIDxkZXNjPkNyZWF0ZWQgd2l0aCBTa2V0Y2guPC9kZXNjPgogICAgPGRlZnM+PC9kZWZzPgogICAgPGcgaWQ9IlBhZ2UtMSIgc3Ryb2tlPSJub25lIiBzdHJva2Utd2lkdGg9IjEiIGZpbGw9Im5vbmUiIGZpbGwtcnVsZT0iZXZlbm9kZCIgc2tldGNoOnR5cGU9Ik1TUGFnZSI+CiAgICAgICAgPGcgaWQ9ImZvbGRlci1vcGVuLXNtYWxsLWNvcHktMy0rLVJlY3RhbmdsZS05MzIiIHNrZXRjaDp0eXBlPSJNU0xheWVyR3JvdXAiIGZpbGw9IiM5OTk5OTgiPgogICAgICAgICAgICA8ZyBpZD0iZm9sZGVyLW9wZW4tc21hbGwtY29weS0zIiBza2V0Y2g6dHlwZT0iTVNTaGFwZUdyb3VwIj4KICAgICAgICAgICAgICAgIDxwYXRoIGQ9Ik03Ljc4MDUsMC45MzMzMzMzMzMgTDkuODQwODMzMzMsMi45OTM2NjY2NyBMMTAuMTEzODMzMywzLjI2NjY2NjY3IEwxMC41LDMuMjY2NjY2NjcgTDE2LjMzMzMzMzMsMy4yNjY2NjY2NyBDMTYuNDU5MzMzMywzLjI2NjY2NjY3IDE2LjU2NjY2NjcsMy4zNzQgMTYuNTY2NjY2NywzLjUgTDE2LjU2NjY2NjcsOC4xNjY2NjY2NyBDMTYuNTY2NjY2Nyw4LjI5MjY2NjY3IDE2LjQ1OTMzMzMsOC40IDE2LjMzMzMzMzMsOC40IEMxNS4xNzYsOC40IDE0LjIzMzMzMzMsOS4zNDE1IDE0LjIzMzMzMzMsMTAuNSBMMTQuMjMzMzMzMywxMi44MzMzMzMzIEMxNC4yMzMzMzMzLDEyLjk1OTMzMzMgMTQuMTI2LDEzLjA2NjY2NjcgMTQsMTMuMDY2NjY2NyBMMS4xNjY2NjY2NywxMy4wNjY2NjY3IEMxLjA0MDY2NjY3LDEzLjA2NjY2NjcgMC45MzMzMzMzMzMsMTIuOTU5MzMzMyAwLjkzMzMzMzMzMywxMi44MzMzMzMzIEwwLjkzMzMzMzMzMywyLjcyMDY2NjY3IEwyLjcyMDY2NjY3LDAuOTMzMzMzMzMzIEw3Ljc4MDUsMC45MzMzMzMzMzMgTDcuNzgwNSwwLjkzMzMzMzMzMyBaIE04LjE2NjY2NjY3LDAgTDIuMzMzMzMzMzMsMCBMMCwyLjMzMzMzMzMzIEwwLDEyLjgzMzMzMzMgQzAsMTMuNDc1IDAuNTI1LDE0IDEuMTY2NjY2NjcsMTQgTDE0LDE0IEMxNC42NDE2NjY3LDE0IDE1LjE2NjY2NjcsMTMuNDc1IDE1LjE2NjY2NjcsMTIuODMzMzMzMyBMMTUuMTY2NjY2NywxMC41IEMxNS4xNjY2NjY3LDkuODU4MzMzMzMgMTUuNjkxNjY2Nyw5LjMzMzMzMzMzIDE2LjMzMzMzMzMsOS4zMzMzMzMzMyBDMTYuOTc1LDkuMzMzMzMzMzMgMTcuNSw4LjgwODMzMzMzIDE3LjUsOC4xNjY2NjY2NyBMMTcuNSwzLjUgQzE3LjUsMi44NTgzMzMzMyAxNi45NzUsMi4zMzMzMzMzMyAxNi4zMzMzMzMzLDIuMzMzMzMzMzMgTDEwLjUsMi4zMzMzMzMzMyBMOC4xNjY2NjY2NywwIEw4LjE2NjY2NjY3LDAgWiIgaWQ9IlNoYXBlIj48L3BhdGg+CiAgICAgICAgICAgIDwvZz4KICAgICAgICAgICAgPHBhdGggZD0iTTAsMy4yMDY5MDkxOCBDMCwzLjIwNjkwOTE4IDIuMDQ1OTI2NTIsMC43MDMyNTY4NDUgMi43Mjg4MjM5LDAuNzAzMjU2ODQ1IEw3Ljc0ODM1Nzc3LDAuNzAzMjU2ODQ1IEM4LjgwMDMwNjg4LDAuNzAzMjU2ODQ1IDkuNTQ5NDM1MDYsMy4yMDY5MDkxOCAxMC42MDEzODQyLDMuMjA2OTA5MTggTDE3LjUwMzU1NTMsMy4yMDY5MDkxOCBMMTcuNTAzNTU1MywxMy4wMDM5NTc5IEMxNy41MDM1NTUzLDEzLjU1NDA1NjggMTcuMDUzMjkxMSwxNCAxNi41MTIzMzcsMTQgTDAsMTQgTDAsMy4yMDY5MDkxOCBaIiBpZD0iUmVjdGFuZ2xlLTkzMiIgc2tldGNoOnR5cGU9Ik1TU2hhcGVHcm91cCI+PC9wYXRoPgogICAgICAgIDwvZz4KICAgIDwvZz4KPC9zdmc+');
      }

      .iron-selected .folder-icon {
        background-image: url('data:image/svg+xml;base64,PD94bWwgdmVyc2lvbj0iMS4wIiBlbmNvZGluZz0iVVRGLTgiIHN0YW5kYWxvbmU9Im5vIj8+Cjxzdmcgd2lkdGg9IjIxcHgiIGhlaWdodD0iMTRweCIgdmlld0JveD0iMCAwIDIxIDE0IiB2ZXJzaW9uPSIxLjEiIHhtbG5zPSJodHRwOi8vd3d3LnczLm9yZy8yMDAwL3N2ZyIgeG1sbnM6eGxpbms9Imh0dHA6Ly93d3cudzMub3JnLzE5OTkveGxpbmsiIHhtbG5zOnNrZXRjaD0iaHR0cDovL3d3dy5ib2hlbWlhbmNvZGluZy5jb20vc2tldGNoL25zIj4KICAgIDwhLS0gR2VuZXJhdG9yOiBTa2V0Y2ggMy4zLjMgKDEyMDcyKSAtIGh0dHA6Ly93d3cuYm9oZW1pYW5jb2RpbmcuY29tL3NrZXRjaCAtLT4KICAgIDx0aXRsZT5mb2xkZXItb3Blbi1zbWFsbCBjb3B5PC90aXRsZT4KICAgIDxkZXNjPkNyZWF0ZWQgd2l0aCBTa2V0Y2guPC9kZXNjPgogICAgPGRlZnM+PC9kZWZzPgogICAgPGcgaWQ9IlBhZ2UtMSIgc3Ryb2tlPSJub25lIiBzdHJva2Utd2lkdGg9IjEiIGZpbGw9Im5vbmUiIGZpbGwtcnVsZT0iZXZlbm9kZCIgc2tldGNoOnR5cGU9Ik1TUGFnZSI+CiAgICAgICAgPGcgaWQ9ImFsYnVtLXNoYXJlIiBza2V0Y2g6dHlwZT0iTVNBcnRib2FyZEdyb3VwIiB0cmFuc2Zvcm09InRyYW5zbGF0ZSgtMTEuMDAwMDAwLCAtMzIwLjAwMDAwMCkiIGZpbGw9IiMzMzMzMzEiPgogICAgICAgICAgICA8ZyBpZD0iZm9sZGVyLW9wZW4tc21hbGwtY29weSIgc2tldGNoOnR5cGU9Ik1TTGF5ZXJHcm91cCIgdHJhbnNmb3JtPSJ0cmFuc2xhdGUoMTEuMDAwMDAwLCAzMjAuMDAwMDAwKSI+CiAgICAgICAgICAgICAgICA8cGF0aCBkPSJNNy43ODA1LDAuOTMzMzMzMzMzIEw5Ljg0MDgzMzMzLDIuOTkzNjY2NjcgTDEwLjExMzgzMzMsMy4yNjY2NjY2NyBMMTAuNSwzLjI2NjY2NjY3IEwxNi4zMzMzMzMzLDMuMjY2NjY2NjcgQzE2LjQ1OTMzMzMsMy4yNjY2NjY2NyAxNi41NjY2NjY3LDMuMzc0IDE2LjU2NjY2NjcsMy41IEwxNi41NjY2NjY3LDguMTY2NjY2NjcgQzE2LjU2NjY2NjcsOC4yOTI2NjY2NyAxNi40NTkzMzMzLDguNCAxNi4zMzMzMzMzLDguNCBDMTUuMTc2LDguNCAxNC4yMzMzMzMzLDkuMzQxNSAxNC4yMzMzMzMzLDEwLjUgTDE0LjIzMzMzMzMsMTIuODMzMzMzMyBDMTQuMjMzMzMzMywxMi45NTkzMzMzIDE0LjEyNiwxMy4wNjY2NjY3IDE0LDEzLjA2NjY2NjcgTDEuMTY2NjY2NjcsMTMuMDY2NjY2NyBDMS4wNDA2NjY2NywxMy4wNjY2NjY3IDAuOTMzMzMzMzMzLDEyLjk1OTMzMzMgMC45MzMzMzMzMzMsMTIuODMzMzMzMyBMMC45MzMzMzMzMzMsMi43MjA2NjY2NyBMMi43MjA2NjY2NywwLjkzMzMzMzMzMyBMNy43ODA1LDAuOTMzMzMzMzMzIEw3Ljc4MDUsMC45MzMzMzMzMzMgWiBNOC4xNjY2NjY2NywwIEwyLjMzMzMzMzMzLDAgTDAsMi4zMzMzMzMzMyBMMCwxMi44MzMzMzMzIEMwLDEzLjQ3NSAwLjUyNSwxNCAxLjE2NjY2NjY3LDE0IEwxNCwxNCBDMTQuNjQxNjY2NywxNCAxNS4xNjY2NjY3LDEzLjQ3NSAxNS4xNjY2NjY3LDEyLjgzMzMzMzMgTDE1LjE2NjY2NjcsMTAuNSBDMTUuMTY2NjY2Nyw5Ljg1ODMzMzMzIDE1LjY5MTY2NjcsOS4zMzMzMzMzMyAxNi4zMzMzMzMzLDkuMzMzMzMzMzMgQzE2Ljk3NSw5LjMzMzMzMzMzIDE3LjUsOC44MDgzMzMzMyAxNy41LDguMTY2NjY2NjcgTDE3LjUsMy41IEMxNy41LDIuODU4MzMzMzMgMTYuOTc1LDIuMzMzMzMzMzMgMTYuMzMzMzMzMywyLjMzMzMzMzMzIEwxMC41LDIuMzMzMzMzMzMgTDguMTY2NjY2NjcsMCBMOC4xNjY2NjY2NywwIFoiIGlkPSJTaGFwZSIgc2tldGNoOnR5cGU9Ik1TU2hhcGVHcm91cCI+PC9wYXRoPgogICAgICAgICAgICAgICAgPHBhdGggZD0iTTIuMzMzMzMzMzMsMTMuODgzMzMzMyBDMS43MTUsMTMuODgzMzMzMyAxLjI4MzMzMzMzLDEzLjYzNzE2NjcgMS4yODMzMzMzMywxMy40MTY2NjY3IEMxLjI4MzMzMzMzLDEzLjExMjE2NjcgMS40ODk4MzMzMywxMi4zNzQ4MzMzIDEuNzMzNjY2NjcsMTEuODA2NjY2NyBMNC4zMTQzMzMzMyw1Ljc4NDMzMzMzIEM0LjU0NjUsNS4yNDE4MzMzMyA1LjI0Myw0Ljc4MzMzMzMzIDUuODMzMzMzMzMsNC43ODMzMzMzMyBMMTkuODMzMzMzMyw0Ljc4MzMzMzMzIEMyMC4xMDQsNC43ODMzMzMzMyAyMC4zMTk4MzMzLDQuODgwMTY2NjcgMjAuNDQxMTY2Nyw1LjA1NCBDMjAuNTYyNSw1LjIyNzgzMzMzIDIwLjU3NjUsNS40NjQ2NjY2NyAyMC40ODA4MzMzLDUuNzE3ODMzMzMgTDE3LjgwMSwxMi44NjYgQzE3LjU5NDUsMTMuNDE3ODMzMyAxNi45MjI1LDEzLjg4MzMzMzMgMTYuMzMzMzMzMywxMy44ODMzMzMzIEwyLjMzMzMzMzMzLDEzLjg4MzMzMzMgTDIuMzMzMzMzMzMsMTMuODgzMzMzMyBaIiBpZD0iU2hhcGUiIHNrZXRjaDp0eXBlPSJNU1NoYXBlR3JvdXAiPjwvcGF0aD4KICAgICAgICAgICAgPC9nPgogICAgICAgIDwvZz4KICAgIDwvZz4KPC9zdmc+');
      }

      *[hidden] {
        display: none !important;
      }
    </style>
    <template is='dom-if' if="[[!readOnly]]">
      <iron-ajax
        bubbles
        id='newAlbum'
        url='[[ajaxbase]]/artifactmanager/albums'
        method='POST'
        headers='[[authHeaders]]'
        handle-as="json"
        body='[[_newAlbum]]'
        loading='{{_newAlbumLoading}}'
        on-response="_handleNewAlbum"></iron-ajax>
    </template>
    <!-- We need to have a tabindex of 0 here to allow this item to be user focusable -->
    <ul id='list' tabindex="0">
      <iron-selector id='routerSelector' selected='{{view}}' attr-for-selected='data-uid' selectable='.items-view'>
        <!-- My Memories Static Selector -->
        <li class='items-view' data-uid='my-memories' on-dragover='_handleDrag' on-dragleave='_clearDrag' on-drop='_handleDrop' title$="[[i18n('memories_desc')]]">
          <div>
            <i class='album-icon my-memories-icon'></i>
            <span data-test='selector-my-memories'>[[i18n('my_memories')]]</span>
            <span class='fs-badge' hidden$='[[_hideCount(hideCounts, view, "my-memories")]]'>[[count]]</span>
          </div>
        </li>
        <!-- My Archive Static Selector -->
        <li class='items-view' data-uid='my-archive' on-dragover='_handleDrag' on-dragleave='_clearDrag' on-drop='_handleDrop' title$="[[i18n('archive_desc')]]">
          <div>
            <i class='album-icon my-archive-icon'></i>
            <span>[[i18n('my_archive')]]</span>
            <span class='fs-badge' hidden$='[[_hideCount(hideCounts, view, "my-archive")]]'>[[_getCount(archiveCount, hideCounts, count)]]</span>
          </div>
        </li>
        <!-- My Favorites Static Selector -->
        <li class='items-view' data-uid='my-favorites' on-dragover='_handleDrag' on-dragleave='_clearDrag' on-drop='_handleDrop' title$="[[i18n('favorites_desc)]]">
          <div>
            <i class='album-icon my-favorites-icon'></i>
            <template is="dom-if" if="[[!memoriesLikeEx]]">
              <span>[[i18n('my_favorites')]]</span>
            </template>
            <template is="dom-if" if="[[memoriesLikeEx]]">
              <span>[[i18n('my_likes')]]</span>
            </template>
            <span class='fs-badge' hidden$='[[_hideCount(hideCounts, view, "my-favorites")]]'>[[_getCount(favoritesCount, hideCounts, count)]]</span>
          </div>
        </li>
        <!-- Recently Deleted Static Selector -->
        <template is="dom-if" if="[[showRecentlyDeleted]]">
          <li class='items-view' data-uid='recently-deleted' on-dragover='_handleDrag' on-dragleave='_clearDrag' on-drop='_handleDrop' title$="[[i18n('deleted_desc)]]">
            <div>
              <i class='album-icon recently-deleted-icon'></i>
              <span>[[i18n('recently_deleted')]]</span>
              <span class='fs-badge' hidden$='[[_hideCount(hideCounts, view, "recently-deleted")]]'>[[_getCount(deletedCount, hideCounts, count)]]</span>
            </div>
          </li>
        </template>
        <li title$="[[i18n('albums')]]">
          <h5 class='albums-divider'>[[i18n('albums')]]</h5>
        </li>
        <template is='dom-if' if="[[!readOnly]]">
          <li id='newAlbumLink' class='add-item-toggle' on-tap='_toggleAddAlbum' hidden$='[[_addingAlbum]]' title$="[[i18n('new_album')]]">
            <div>
              <i class="album-icon add-folder-icon"></i>
              <span>[[i18n('new_album')]]</span>
            </div>
          </li>
        </template>
        <li id='newAlbumView' hidden$='[[!_addingAlbum]]'>
          <div class='add-album'>
            <button id='closeButton' class="fs-icon fs-icon-close close-button" aria-label="Close modal" on-tap='_handleCancelNewAlbum'>&nbsp;</button>
            <iron-a11y-keys target="[[_albumInput]]" keys="esc" on-keys-pressed="_toggleAddAlbum"></iron-a11y-keys>
            <iron-a11y-keys target="[[_albumInput]]" keys="enter" on-keys-pressed="_createNewAlbum"></iron-a11y-keys>
            <input id='titleInput' class='album-title-input' type="text" value='{{_newAlbum.name::input}}' maxlength$='[[_nameMaxLength]]'>
            <div>
              <button id='saveButton' class="fs-button fs-button--recommended fs-button--small" on-tap='_createNewAlbum' disabled='[[!_newAlbum.name]]'>[[i18n('save')]]</button>
              <span>[[_charsRemaining(_newAlbum.name)]]</span>
            </div>
          </div>
        </li>
        <!-- Generated list of albums -->
        <template id="album-list" is='dom-repeat' items='{{albums}}' as='album' sort='_sortByName' filter='_isNotFavorite'>
          <li class='items-view album-item' data-uid$='[[album.id]]' on-dragover='_handleDrag' on-dragleave='_clearDrag' on-drop='_handleDrop' title$="[[album.name]]">
            <div>
              <i class='album-icon folder-icon'></i>
              <span>[[album.name]]</span>
              <span class='fs-badge' hidden$='[[_hideCount(hideCounts, view, album.id)]]'>[[_getCount(album.artifactCount, hideCounts, count)]]</span>
            </div>
          </li>
        </template>
      </iron-selector>
    </ul>
  </template>
</dom-module>

<script>
  Polymer({
    is: 'fs-gallery-view-selector',
    behaviors: [
      WCI18n(),
      OakI18nBehavior,
      OakAJAXBehavior,
      FsBehaviors.Metrics
    ],
    properties: {
      memoriesLikeEx: {
        type: Boolean,
        value: function () {
          return FS.showEx('memoriesLikeEx');
        }
      },
      // Private Props
      _addingAlbum: {
        type: Boolean,
        value: false
      },
      _albumInput: {
        type: Object
      },
      _newAlbum: {
        type: Object,
        value: function() { return {}; }
      },
      _newAlbumLoading: {
        type: Boolean,
        value: false
      },
      _nameMaxLength: {
        type: Number,
        value: 200
      },

      // EXPORTED PROPS
      /**
       * The current selected view
       * @type {String}
       */
      view: {
        type: String,
        value:'my-memories',
        observer: '_notifyViewChanged',
        notify: true
      },

      // USER INPUTS
      /**
       * An array of albums to display for selection
       * @type {Array}
       */
      albums: {
        type: Array,
        notify: true,
        value: function() { return []; }
      },

      /**
       * The count to be used for the `My Memories` area
       *
       * _NOTE: If the `hideCounts` property is set to true
       * this property can be used to indicate the count for
       * all 3 of the main selection categories (My Memories,
       * My Archive, and My Favorites), without passing
       * `archiveCount` or `favoritesCount` (though they will
       * still work)_
       * @type {Number}
       */
      count: {
        type: Number,
        value: 0
      },

      /**
       * The displayed number of favorited artifacts available
       * @type {Number}
       */
      favoritesCount: {
        type: Number,
        value: null
      },

      /**
       * The displayed number of archived artifacts available
       * @type {Number}
       */
      archiveCount: {
        type: Number,
        value: null
      },

      /**
       * The displayed number of deleted artifacts available
       * @type {Number}
       */
      deletedCount: {
        type: Number,
        value: null
      },

      /**
       * If passed this will allow a user to, when focusing the list,
       * use the arrow keys to navigate through the available views
       * @type {Boolean}
       */
      handleKeypress: {
        type: Boolean,
        value: false
      },

      /**
       * If passed this will automatically focus the list so that
       * a user can immediately scroll through views on keypress.
       *
       * _NOTE: This is really only useful when `handleKeypress` is
       * set to true_
       * @type {Boolean}
       */
      autoFocus: {
        type: Boolean,
        value: false
      },

      /**
       * If passed this will disable the "Add Album" affordance
       * @type {Boolean}
       */
      readOnly: {
        type: Boolean,
        value: false
      },

      /**
       * If passed this will disable the displaying of counts
       * for everything except the active view.
       *
       * Additionally when set to true a user need only pass the
       * `count` property to display counts. If you pass `favoritesCount`
       * or `archiveCount` it will still work, this is simply
       * given as a convenience option
       * @type {Object}
       */
      hideCounts: {
        type: Boolean,
        value: false
      },

      showRecentlyDeleted: {
        type: Boolean,
        value: false
      }
    },
    ready: function() {
      this.fire('resize');
      this._albumInput = this.$$('#titleInput');
      this.listen(document, 'gallery-album-edit', '_renderAlbumList');
    },
    attached: function() {
      if (this.handleKeypress) {
        this.listen(this.$.list, 'focus', '_setupArrowListeners');
        this.listen(this.$.list, 'blur', '_removeArrowListners');
        if (this.autoFocus) {
          this.$.list.focus();
        }
      }
    },
    _charsRemaining: function(title) {
      if (!title) return this._nameMaxLength;
      return this._nameMaxLength - title.length;
    },
    _checkArrow: function(e) {
      var selector = this.$.routerSelector;
      if (e.keyCode == 38) {
        e.preventDefault();
        selector.selectPrevious();
      } else if (e.keyCode == 40) {
        e.preventDefault();
        selector.selectNext();
      }
      selector.selectedItem.scrollIntoView(false);
    },
    _clearDrag: function(e) {
      var target = e.currentTarget;
      target.classList.remove('dragging');
    },
    _createNewAlbum: function() {
      if (!this._newAlbum || !this._newAlbum.name || this.readOnly) return;
      this.$$('#newAlbum').generateRequest();
    },
    _getCount: function(count, hide, globalCount) {
      if (hide && typeof globalCount === 'number') return globalCount;
      return count;
    },
    _handleCancelNewAlbum: function() {
      this._toggleAddAlbum()
    },
    _handleNewAlbum: function(e) {
      if (!e || !e.detail || !e.detail.response) return;
      this.push('albums', e.detail.response);
      this.fire('gallery-router-new-album', e.detail.response);
      this._toggleAddAlbum();
      this.fireMetrics({link_name: 'Album: Save New'});
    },
    _handleDrag: function(e) {
      if (this.readOnly || this.view === 'recently-deleted') return;
      e.preventDefault();
      var target = e.currentTarget;
      var collection = target.getAttribute('data-uid');
      if ((collection === 'my-archive' && this.view !== 'my-memories') || (collection === 'my-memories' && this.view !== 'my-archive'))  {
        e.dataTransfer.dropEffect = 'move';
      } else {
        target.classList.add('dragging');
      }
    },
    _handleDrop: function(e) {
      if (this.readOnly) return;
      e.preventDefault();
      var target = e.currentTarget;
      var collection = e.currentTarget.getAttribute('data-uid');
      // Don't move items to archive from albums or to my memories from anywhere but the archive
      if ((collection === 'my-archive' && this.view !== 'my-memories')
        || (collection === 'my-memories' && this.view !== 'my-archive')
        || (this.view === 'recently-deleted')) return;
      // Drop
      this._clearDrag(e);
      if (!e.dataTransfer.getData('text')) return;

      if (collection === 'my-favorites') {
        this.fire('gallery-execute-action', { 'actionType' : 'add_to_my_favorites' });
      } else if (collection === 'my-memories') {
        this.fire('gallery-execute-action', { 'actionType' : 'unarchive' });
      } else if (collection === 'my-archive') {
        this.fire('gallery-execute-action', { 'actionType' : 'archive' });
      } else if (collection === 'recently-deleted') {
        this.fire('gallery-execute-action', { 'actionType' : 'delete' });
      } else {
        // Tell gallery-data to add selected items to this album
        this.fire('gallery-execute-action', { 'actionType' : 'add_to_album', 'albumId' : collection });
      }
    },
    _hideCount: function(hide, currentView, targetView) {
      if (!hide) return false;
      return currentView != targetView;
    },
    _notifyViewChanged: function(value) {
      this.fire('gallery-view-changed', {
        view: value
      });
    },
    _setupArrowListeners: function() {
      this.listen(document, 'keydown', '_checkArrow');
    },
    _sortByName: function(a, b) {
      // If both values are undefined return 0;
      if (!a.name && !b.name) return 0;

      // If one of the values are undefined move
      // the existing value ahead of the non-existing
      if (!a.name || !b.name) return a.name ? -1 : 1;

      // Sort the values by name alphabetically
      var nameA = a.name.toLowerCase();
      var nameB = b.name.toLowerCase();
      if (nameA < nameB) return -1;
      if (nameA > nameB) return 1;
      return 0;
    },
    _renderAlbumList: function() {
      this.$['album-list'].render();
    },
    _isNotFavorite: function(album) {
      return album && !album.favorite;
    },
    _removeArrowListners: function() {
      this.unlisten(document, 'keydown', '_checkArrow');
    },
    _toggleAddAlbum: function() {
      this._newAlbum = {};
      this._addingAlbum = !this._addingAlbum;
      if (this._addingAlbum) {
        this.$.titleInput.focus();
      }
    },
  });
</script>
